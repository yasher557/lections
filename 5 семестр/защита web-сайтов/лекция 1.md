---
tags:
  - lection
semester: 5
subject: Защита web-сайтов
date: 12.09.2025
done: true
---
# Основные принципы безопасности web-приложений


==Безопасность веб приложения== — критически важный аспект в его эксплутации.
### принципы безопасности web-приложений:

1.  Защита от инъекций (Injection Protection)
2. Аутентификация и авторизация (Authentication and Authorization)
3. Управление сессиями и токенами (Session and Token Management)
4. Защита от межсайтового скриптинга (Cross-Site Scripting - XSS)
5. Защита от межсайтовой подделки запроса (Cross-Site Request Forgery - CSRF)
6. Безопасность файлов и загрузок
7. Обновление и патчи
8. Мониторинг и логирование
9. Шифрование данных

Безопасность веб-приложений должна рассматриваться на каждом этапе их разработки, начиная от проектирования и заканчивая этапом эксплуатации. Вот принципы безопасности, которые следует учитывать на каждом этапе:

1. Проектирование:
	- Угрозы и уязвимости:
		Проведите анализ угроз и определите потенциальные уязвимости. 	Учтите особенности бизнеса при определении уровня риска.
	- Архитектура:
		Проектируйте безопасную архитектуру, уделяя внимание адекватному разделению прав доступа. Используйте принципы обороны в глубину (defense-in-depth).
2. Разработка:
	- Безопасное программирование:
		Используйте безопасные API и библиотеки. Проверяйте ввод данных и обрабатывайте его безопасным образом, избегая инъекций.
	- Аутентификация и авторизация:
		Реализуйте безопасные механизмы аутентификации и авторизации. Убедитесь в использовании надежных методов хранения паролей.
	- Тестирование безопасности:
		Проводите тщательное тестирование на уязвимости, включая статический и динамический анализ кода. Проводите тестирование с применением инструментов для обнаружения уязвимостей.
3. Тестирование:
	- Пенетрационное тестирование:
		Проводите пенетрационное тестирование для выявления слабых мест в системе. 	Анализируйте результаты и проводите необходимые корректировки.
	- Тестирование на стойкость к атакам:
		Имитируйте различные виды атак для проверки стойкости приложения. Проводите тестирование на стойкость к отказу в обслуживании (DDoS).
4. Внедрение:
	- Мониторинг:
		Реализуйте систему мониторинга безопасности для отслеживания необычной активности. Настройте оповещения на случай обнаружения потенциальных инцидентов безопасности.
	- Обучение и осведомленность:
		Проводите обучение персонала по вопросам безопасности. 	Обеспечьте регулярные обновления знаний сотрудников о современных угрозах.
5. Эксплуатация:
	- Обновления и патчи:
		Регулярно обновляйте все компоненты приложения, включая фреймворки, библиотеки и операционные системы. Минимизируйте использование устаревших версий программного обеспечения.
	- Реагирование на инциденты:
		Разработайте план реагирования на инциденты. Проводите регулярные тренировки для персонала по реагированию на инциденты.
	- Аудит безопасности:
		Периодически проводите аудит безопасности для выявления изменений в угрозах и уязвимостях. Внимательно анализируйте логи и мониторинг безопасности.

### Принцип валидации и фильтрации входных данных.

Принцип валидации и фильтрации входных данных — это важная составляющая безопасности веб-приложений. Он направлен на предотвращение внедрения вредоносного кода, инъекций и других атак, связанных с некорректной обработкой входных данных.

1.  Проверка на корректность формата:
	Убедитесь, что входные данные соответствуют ожидаемому формату (например, электронная почта, номер телефона). Используйте регулярные выражения и другие средства для проверки соответствия формату.
	
2.  Длина данных:
	Установите максимальные и минимальные допустимые значения для вводимых данных (например, паролей, имен пользователя). Это помогает предотвратить атаки, связанные с переполнением буфера.
	
3.  Диапазоны значений:
	Проверьте, что числовые значения находятся в пределах разумных диапазонов. При необходимости, ограничьте значения, чтобы предотвратить атаки типа "зловредный запрос".
	
4.  Валидация на стороне клиента и сервера:
	Осуществляйте валидацию как на стороне клиента (для удобства пользователя), так и на стороне сервера (для безопасности). Не полагайтесь только на валидацию на стороне клиента, так как ее можно обойти.
	
5. Фильтрация входных данных:
	При загрузке файлов проверяйте их типы и содержимое. Не допускайте выполнение файлов на сервере (например, загрузка исполняемых файлов).
	
6.  Экранирование (Escaping):
	Применяйте экранирование символов перед выводом данных на экран, чтобы предотвратить межсайтовый скриптинг (XSS). Экранируйте специальные символы, такие как <, >, ", ', чтобы они не интерпретировались как HTML или JavaScript.
	
7.  Предотвращение инъекций:
	Используйте параметризованные запросы при работе с базой данных для предотвращения SQL-инъекций. Фильтруйте или экранируйте специальные символы при работе с командами операционной системы.
	
8.  Ограничение доступных символов:
	Ограничивайте доступные символы во входных данных, если это возможно. 	Запрещайте использование опасных символов, которые могут быть использованы для инъекций, например, символы управления, специальные символы SQL.
	
9.  Фильтрация файлов:
	При загрузке файлов проверяйте их типы и содержимое. Не допускайте выполнение файлов на сервере (например, загрузка исполняемых файлов).
	
10.  Канонизация (Canonicalization) путей:
	Приводите пути к каноническому виду для предотвращения атак, связанных с манипуляцией путями файлов. Обеспечение корректной валидации и фильтрации входных данных снижает риски безопасности и предотвращает множество типов атак, основанных на манипуляции вводимыми данными.

### Параметризованные запросы

==Параметризованные запросы== — это метод безопасной работы с базой данных, который позволяет предотвращать атаки SQL-инъекций. Вместо вставки пользовательского ввода непосредственно в SQL-запрос, используются параметры, которые передаются отдельно. Это позволяет избежать интерпретации пользовательского ввода как части SQL-запроса. Примеры использования параметризованных запросов зависят от языка программирования и библиотеки для работы с базой данных, но общие принципы остаются похожими.

#### Пример в Python
с использованием библиотеки SQLite:
``` python

import sqlite3

# Пользовательский ввод
user_input = "John"

# Создание подключения к базе данных
conn = sqlite3.connect("example.db")
cursor = conn.cursor()

# Использование параметризованного запроса
cursor.execute("SELECT * FROM users WHERE username=?", (user_input,))

# Получение результата
result = cursor.fetchall()

# Закрытие соединения
conn.close()
```

#### Пример в Java с использованием JDBC:
``` Java

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class Example {
    public static void main(String[] args) {
        // Пользовательский ввод
        String userInput = "John";

        // Создание подключения к базе данных
        try (Connection connection = DriverManager.getConnection(
        "jdbc:mysql://localhost:3306/example", "user", "password")) {
            
            // Использование параметризованного запроса
            String query = "SELECT * FROM users WHERE username=?";
            try (PreparedStatement preparedStatement =
                connection.prepareStatement(query)) {
	                preparedStatement.setString(1, userInput);

                // Выполнение запроса и получение результата
                try (ResultSet resultSet = 
	                preparedStatement.executeQuery()) {
	                while (resultSet.next()) {
	                   // Обработка результата
	                 }
                }
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}

```

В обоих примерах символ "?" используется для обозначения параметра. Значение параметра устанавливается с использованием специального метода (например, setString для строки) перед выполнением запроса. Это позволяет изолировать пользовательский ввод от SQL-кода, предотвращая возможность внедрения вредоносного SQL-кода.